<!DOCTYPE html>
<html>
{{- partial "head.html" . -}}

<head>
  <style>

    /* début animation carré*/

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    .block {
      margin: auto;
      padding: 20px;
      width: 200px;
      height: 200px;
      box-shadow: inset 0 0 0 1px rgba(105, 202, 98, 0.5);
    }

    .block,
    .block::before,
    .block::after {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
    }

    .block::before,
    .block::after {
      content: '';
      z-index: -1;
      margin: -5%;
      box-shadow: inset 0 0 0 2px;
      opacity: .5;
      /*   transition: .5s; */
      animation: clipMe 8s linear infinite;
    }

    .block:hover::before,
    .block:hover::after {
      opacity: 0.2;
      animation: clipMe 3s linear infinite;
    }

    .block::before {
      animation-delay: -4s;
    }



    @keyframes clipMe {

      0%,
      100% {
        clip: rect(0px, 220px, 2px, 0px);
      }

      25% {
        clip: rect(0px, 2px, 220px, 0px);
      }

      50% {
        clip: rect(218px, 220px, 220px, 0px);
      }

      75% {
        clip: rect(0px, 220px, 220px, 218px);
      }
    }

  </style>
</head>

<body>
  <section class="Body">

    <div class="SO">
      SO devrait être en bas à gauche
    </div>
    <div class="ON">
      ON devrait être en haut à gauche
    </div>
    <div class="ONS">
      ONS devrait être au milieu à gauche
    </div>
    <div class="OS">
      ES devrait être en bas à droite
    </div>


    <div class="SS">
      E0S devrait au milieu à droite
    </div>
    <div class="SE">
      NE devrait être en haut à droite
    </div>

    <section class="Toc">
      ToC sur le côté gauche haut
      <br>
      titre
      <br>
      titre
      <br>
      titre
      <br>
      titre
      <br>
      titre

    </section>


    <section class="Centre">
      <div class="content">

        {{- block "main" . }}{{- end }}


      </div>
    </section>

    <section class="Humeur">
      humeur devrait être sur le côté droit haut

    </section>

    <div>
      <a href="#" class="block"></a>
      {{- partial "header.html" . -}}


    </div>
    <section class="Navigation">
      Fleches devrait être en bas centre
    </section>

    <section class="Bas">
      <div class="content">

        <p class="licence">cc by-sa 4.0 {{ now.Format "2006"}} Margot Mellet <br /><small>non-responsive</small></p>


      </div>
    </section>
  </section>

  <script type="application/json" class="js-hypothesis-config">
    {
      "theme": "clean",
      "openSidebar": false
    }
  </script>
  <script async="" src="https://hypothes.is/embed.js"></script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {
      var sectionLinks = $('.table-of-contents-link');
      var sections = $('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]');

      var activeSectionId = null;
      var previousSectionId = null;

      $(window).on('scroll', function () {
        updateActiveSection();
      });

      sectionLinks.on('click', function (e) {
        e.preventDefault();

        var targetSectionId = $(this).attr('href');

        activeSectionId = targetSectionId;
        updateActiveSection();

        // Mise à jour de l'URL
        history.pushState(null, null, targetSectionId);

        // Faire défiler jusqu'à la section cible
        $('html, body').animate({
          scrollTop: $(targetSectionId).offset().top
        }, 10);
      });

      // Gestion de l'événement popstate pour mettre à jour la section active lorsque l'URL change
      $(window).on('popstate', function () {
        var targetSectionId = location.hash;

        if (targetSectionId) {
          activeSectionId = targetSectionId;
          updateActiveSection();
        }
      });

      function updateActiveSection() {
        var currentPosition = $(window).scrollTop() + $(window).height() / 2;

        sections.each(function () {
          var sectionId = $(this).attr('id');
          var sectionTop = $(this).offset().top;
          var sectionBottom = sectionTop + $(this).outerHeight();

          if (currentPosition >= sectionTop && currentPosition <= sectionBottom) {
            previousSectionId = activeSectionId;
            activeSectionId = '#' + sectionId;
            return false; // Sortir de la boucle each une fois la section actuelle trouvée
          }
        });

        sectionLinks.removeClass('active');

        if (activeSectionId) {
          sectionLinks.filter('[href="' + activeSectionId + '"]').addClass('active');
        }

        if (previousSectionId && previousSectionId !== activeSectionId) {
          sectionLinks.filter('[href="' + previousSectionId + '"]').removeClass('active');
        }
      }

      // Vérification de la section active au chargement de la page
      $(window).on('load', function () {
        var initialSectionId = location.hash;

        if (initialSectionId) {
          activeSectionId = initialSectionId;
          updateActiveSection();
        }
      });
    });
  </script>

</body>

</html>